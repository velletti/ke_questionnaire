{namespace be=TYPO3\CMS\Backend\ViewHelpers}
<f:layout name="Backend" />

<f:section name="main">
	<f:if condition="{id}">
		<f:then>
			<f:if condition="{questionnaires}">
				<f:then>
					<h2><f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_export.xlf:list.header" /></h2>
					<div class="module_list">
						<h4><f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_export.xlf:list.types" /></h4>
						<ul>
							<li>
								<h5><f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_export.xlf:csv.title" /></h5>
								<f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_export.xlf:csv.description" />
							</li>
						</ul>
					</div>
					<h4><f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_export.xlf:index_list_header" /></h4>
					<ul class="keq_list">
						<f:for each="{questionnaires}" as="questionnaire">
							<li>
								<a href="{be:moduleLink(route:'kequestionnairebe_exportcsv', arguments: '{function: \'exportcsv\',moduleData: \'kequestionnairebe_exportcsv\',id: id, uid: questionnaire.uid}')}">
									{questionnaire.header}&nbsp;(uid: {questionnaire.uid})
									(<f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_authcode.xlf:count" />{questionnaire.countFinishedResults}/{questionnaire.countResults})
								</a>
							</li>
						</f:for>
					</ul>
				</f:then>
				<f:else>
					<div class="module_list">
						<h4><f:translate key="LLL:EXT:ke_questionnaire/Resources/Private/Language/locallang_mod_authcode.xlf:list.types" /></h4>

						No questionnaires found on Pid: '{id}'
					</div>
				</f:else>
			</f:if>
		</f:then>
		<f:else>
			<div class="module_list">
				<h4>Select page in Pagetree on the left side.</h4>
			</div>
		</f:else>
	</f:if>
</f:section>